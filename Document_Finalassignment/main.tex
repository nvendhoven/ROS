% Created by Bonita Graham
% Last update: December 2019 By Kestutis Bendinskas

% Authors: 
% Please do not make changes to the preamble until after the solid line of %s.

\documentclass[10pt]{article}
\usepackage[explicit]{titlesec}
\setlength{\parindent}{0pt}
\setlength{\parskip}{1em}
\usepackage{hyphenat}
\usepackage{ragged2e}
\RaggedRight

% These commands change the font. If you do not have Garamond on your computer, you will need to install it.
\usepackage{garamondx}
\usepackage[T1]{fontenc}
\usepackage{amsmath, amsthm}
\usepackage{graphicx}

\usepackage{mathtools}
\DeclarePairedDelimiter\ceil{\lceil}{\rceil}
\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}

\usepackage{xcolor} % Define custom colours using \textcolor{color}{text}
\usepackage{float}

% Colour definitions
\definecolor{darkpink}{rgb}{1.0, 0.13, 0.32}

% This adjusts the underline to be in keeping with word processors.
\usepackage{soul}
\setul{.6pt}{.4pt}


% The following sets margins to 1 in. on top and bottom and .75 in on left and right, and remove page numbers.
\usepackage{geometry}
\geometry{vmargin={1in,1in}, hmargin={.75in, .75in}}
\usepackage{fancyhdr}
\pagestyle{fancy}
\pagenumbering{gobble}
\renewcommand{\headrulewidth}{0.0pt}
\renewcommand{\footrulewidth}{0.0pt}

% These Commands create the label style for tables, figures and equations.
\usepackage[labelfont={footnotesize,bf} , textfont=footnotesize]{caption}
\captionsetup{labelformat=simple, labelsep=period}
\newcommand\num{\addtocounter{equation}{1}\tag{\theequation}}
\renewcommand{\theequation}{\arabic{equation}}
\makeatletter
\renewcommand\tagform@[1]{\maketag@@@ {\ignorespaces {\footnotesize{\textbf{Equation}}} #1.\unskip \@@italiccorr }}
\makeatother
\setlength{\intextsep}{10pt}
\setlength{\abovecaptionskip}{2pt}
\setlength{\belowcaptionskip}{-10pt}

\renewcommand{\textfraction}{0.10}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\floatpagefraction}{0.90}

% These commands set the paragraph and line spacing
\titleformat{\section}
  {\normalfont}{\thesection}{1em}{\MakeUppercase{\textbf{#1}}}
\titlespacing\section{0pt}{0pt}{-10pt}
\titleformat{\subsection}
  {\normalfont}{\thesubsection}{1em}{\textit{#1}}
\titlespacing\subsection{0pt}{0pt}{-8pt}
\renewcommand{\baselinestretch}{1.15}

% This designs the title display style for the maketitle command
\makeatletter
\newcommand\sixteen{\@setfontsize\sixteen{17pt}{6}}
\renewcommand{\maketitle}{\bgroup\setlength{\parindent}{0pt}
\begin{flushleft}
\sixteen\bfseries \@title
\medskip
\end{flushleft}
\textit{\@author}
\egroup}
\makeatother

% This styles the bibliography and citations.
%\usepackage[biblabel]{cite}
\usepackage[sort&compress]{natbib}
\setlength\bibindent{2em}
\makeatletter
\renewcommand\@biblabel[1]{\textbf{#1.}\hfill}
\makeatother
\renewcommand{\citenumfont}[1]{\textbf{#1}}
\bibpunct{}{}{,~}{s}{,}{,}
\setlength{\bibsep}{0pt plus 0.3ex}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Authors: Add additional packages and new commands here.  
% Limit your use of new commands and special formatting.

% Place your title below. Use Title Capitalization.
\title{Schedulability test for a jobset using Deadline Monotonic algorithm}

% Add author information below. Communicating author is indicated by an asterisk, the affiliation is shown by superscripted lower case letter if several affiliations need to be noted.
\author{
Youri Klaassens$^{a}$, Nick van Endhoven$^{b}$ \\ \medskip 
$^{a}$student Computer Engineering Rotterdam University of Applied Science, 0996211@hr.nl, Zwaag \\ 
$^{b}$student Computer Engineering Rotterdam University of Applied Science, 1234567@hr.nl, Breda\\ \medskip 
}

\pagestyle{empty}
\begin{document}

% Makes the title and author information appear.
\vspace*{.01 in}
\maketitle
\vspace{.12 in}

% Introduction.
\section*{introduction}

For the Real-Time Operating System (ROS01) course taught at Rotterdam University of Applied Science the authors have to prove they understand the theory of RTOS scheduling and can analyse a jobset for a real time system.
After the analysis of the jobset the authors should conclude if the jobset if schedulable according to the Deadline Monotonic algorithm.

The schedulability tests assume that the jobset will be executed on a uniprocessor system where tasks are preemtable.
It also assumes that that there is no context-switching time. 
It also assumes that the execution of the scheduler does not require the processor, that is, the scheduler runs on another specialized processor.


The system has 4 different kind of shared resources $k$. Every shared resource $k$ has a maximum hold time it may be claimed $C_k$.
These 4 different shared resources with their respective maximum hold time are given in Table \ref{tab:resource_characteristics}.
\begin{table}[H]
    \centering
    \begin{tabular}{|c|c|}
        \hline
        \textcolor{darkpink}{\textit{k}} & \textcolor{darkpink}{\textit{$C_k$}} \\
        \hline

        1 & 8 \\
        \hline

        2 & 20 \\
        \hline

        3 & 10 \\
        \hline

        4 & 40 \\
        \hline
    \end{tabular}

    \caption{Characteristics of the available shared resources. }
    \label{tab:resource_characteristics}
\end{table}
This document uses task characteristics letters compatible with the letters defined by Cheng in \.
Task $T_i$ has a maximum computation time $c_i$, a deadline $d_i$ and a period $p_i$.
The characteristics of the various real-time tasks in this system can be seen in Table \ref{tab:task_characteristics}.

\begin{table}[H]
    \centering
    \begin{tabular}{|c|c|c|c|c|}
        \hline 
        \textcolor{darkpink}{$i$} & \textcolor{darkpink}{\textit{$p_i$}} & \textcolor{darkpink}{\textit{$d_i$}} & \textcolor{darkpink}{\textit{$c_i$}} & \textcolor{darkpink}{Uses shared resource} \\
        \hline

        1 & 400 & 360 & 90 & R2, R3, R1 \\
        \hline

        2 & 600 & 580 & 50 & R4 \\
        \hline

        3 & 800 & 400 & 30 & R1 \\
        \hline

        4 & 700 & 420 & 40 & R2 \\
        \hline

        5 & 200 & 170 & 100 & R4, R3 \\
        \hline

    \end{tabular}
    
    \caption{Characteristics of the different tasks}
    \label{tab:task_characteristics}
\end{table}

The goal of this document is to prove whether the given real-time tasks in Table \ref{tab:task_characteristics} are Deadline Monotonic schedulable taking into account the shared resources in Table \ref{tab:resource_characteristics}.
What now follows is the outline for the rest of this document.
Section \ref{sec:simple_test} uses a couple of simple schedulability tests not taking the shared resources into account.

\newpage
\section{Simple schedulability tests}
\label{sec:simple_test}

For the reader who is not familiar with the term schedulability test, a schedulability test is used to validate that a given application can satisfy its specified deadlines when scheduled according to a specific scheduling algorithm \cite{cheng}.
For the reader who is not familiar with the term schedulabe utilization, the schedulable utilization is the maximum utilization allowed for a set of tasks that will guarantee a feasible scheduling for the jobset \cite{cheng}.
Now we can represent the first schedulability test.
Given a set of $n$ independent, preemptable and period tasks on a uniprocessor, let $U$ be the total utilization of this task set.
A necessary and sufficient condition for feasible scheduling of this jobset is Equation \ref{eq:eq1}

\begin{equation}
    U = \sum_{i=1}^{n} \frac{c_i}{p_i} \leq 1
    \label{eq:eq1}
\end{equation}

Using Equation \ref{eq:eq1} we can use the task characteristics from Table \ref{tab:task_characteristics} and calculate the utilization. If the calculated utilization is greater than 1 we can conclude that the CPU should do more calculations in a time unit than possible and this jobset is not schedulable.
Equation \ref{eq:eq2} contains the elaboration.

\begin{equation}
    U = \sum_{i=1}^{5} \frac{c_i}{p_i} = \frac{90}{400} + \frac{50}{600} + \frac{30}{900} + \frac{40}{700} + \frac{100}{200} \approx 0.90 \Rightarrow 0.90 \leq 1
    \label{eq:eq2}
\end{equation}

Since the CPU utilization is less than 1 we can conclude that the jobset may be schedulable.
We can use the schedulability test in Equation \ref{eq:eq3} to test if the jobset can be guaranteed scheduled.
If this test fails it does not men that the jobset is not schedulable.
Given a set of $n$ independent, preemtable and period tasks on a uniprocessor, let $U$ be the total utilization of this jobset.
A sufficient condition for feasible scheduling of this jobset is Equation \ref{eq:eq3}.
\begin{equation}
    U = \sum_{i=1}^{n} \frac{c_i}{p_i} \leq n(2^{\frac{1}{n}} - 1)
    \label{eq:eq3}
\end{equation}

However, the condition is Equation \ref{eq:eq3} may result in under-utilization of the CPU \cite{cheng}.
Imagine $n \rightarrow \infty$ then the utilization is $ \ln(2)$ or $\approx0.693$.
Using Equation \ref{eq:eq3} with the jobset defined in Table \ref{tab:task_characteristics} results in an elaboration seen in Equation \ref{eq:eq4}.
0.90 is not less than or equal to $5(2^{\frac{1}{5}} - 1)$ which is approximately 0.74.
This means that this test can not ensure that the jobset is schedulable, but it might still be possible.

\begin{equation}
    U = \sum_{i=i}^{5} \frac{c_i}{p_i} = \frac{90}{400} + \frac{50}{600} + \frac{30}{900} + \frac{40}{700} + \frac{100}{200} \approx 0.90 \text{  which should be } \leq  5(2^{\frac{1}{5}} - 1)  
    \label{eq:eq4}
\end{equation}

\section{Schedulability test without taking shared resources into account}

This section will present the reader a shedulability test which can guarantee whether the jobset is Deadline Monotonic schedulable or not.
It does not take the shared resources into account.
The reader may wonder why we dedicate a section about proving whether the jobset is Deadline Monotonic schedulable without taking the shared resources into account.
If this section proves that the jobset is not Deadline Monotonic schedulable without taking the shared resources into account then the jobset will not be Deadline Monotonic schedulable taking the shared resources into account.
The prove whether the jobset is Deadline Monotonic which will be presented in the next section and is an extension on the schedulability test presented in this section.
\newpage

Suppose we have three tasks $T_1$, $T_2$ and $T_3$. Task $T_1$ has the smallest deadline followed by $T_2$, and then $T_3$.
It is intuitive to see that in order to schedule $T_1$ its computation time must be less than or equal to its period.
Therefore the following necessary and sufficient condition must hold in Equation \ref{eq:eq5}.

\begin{equation}
    c_1 \leq p_1 
    \label{eq:eq5}
\end{equation}

For $T_2$ to be feasible scheduled we need to find enough available time in the period $[0, p_2]$ that is not used by $T_1$.
Imagine $T_2$ is finished executing at time $t$ then the total number of iterations of $T_1$ is

\begin{equation}
    \ceil*{\frac{t}{p_1}}
\end{equation}

To ensure that $T_2$ can complete execution at time $t$ we must ensure that every iteration of $T_1$ in $[0, t]$ must be completed and there should still be enough time for $T_2$ to execute.
The available time for $T_2$ is

\begin{equation}
    t = \ceil*{\frac{t}{p_1}}c_1 + c_2
\end{equation}

And similiar for $T_3$ to be feasible scheduled there must be enough time available after scheduling $T_1$ and $T_2$

\begin{equation}
    t = \ceil*{\frac{t}{p_1}}c_1 + \ceil*{\frac{t}{p_2}}c_2 + c_3
\end{equation}

The only thing we need to consider is how to determine if such $t$ exists such that the jobset can be feasible scheduled.
There are an infinite number of datapoints in the time interval if no discrete time is assumed. 
However, the value of the ceiling $\ceil*{\frac{t}{p_1}}$ only changes at multiples of $p_1$ with an increase of $c_1$.
Thus we only need to show that a $k$ exists such that

\begin{equation}
    k p_1 \geq k c_1 + c_2 \text{ and } k p_1 \leq k p_2 
\end{equation}

Therefore, we need to check that
\begin{equation}
    t \geq \ceil*{\frac{t}{p_1}}c_1 + c_2
\end{equation}

We will use the equations just derived on the jobset of Table \ref{tab:task_characteristics_new}.
This is the same jobset we introduced in Table \ref{tab:task_characters}, but is now arranged in order of priority.
$T_1$ has now the highest priority because its deadline is the shortest compared to the other tasks followed by $T_2$ and so on.

\begin{table}[H]
    \centering
    \begin{tabular}{|c|c|c|c|c|}
        \hline 
        \textcolor{darkpink}{$i$} & \textcolor{darkpink}{\textit{$p_i$}} & \textcolor{darkpink}{\textit{$d_i$}} & \textcolor{darkpink}{\textit{$c_i$}} & \textcolor{darkpink}{Uses shared resource} \\
        \hline

        1 & 200 & 170 & 100 & R4, R3 \\
        \hline

        2 & 400 & 360 & 90 & R2, R3, R1 \\
        \hline

        3 & 800 & 400 & 30 & R1 \\
        \hline

        4 & 700 & 420 & 40 & R2 \\
        \hline

        5 & 600 & 580 & 50 & R4 \\
        \hline
        
    \end{tabular}
    
    \caption{Characteristics of the different tasks rearranged in order of priority}
    \label{tab:task_characteristics_new}
\end{table}


Let
\begin{equation}
    w_i(t) = \sum_{k=1}^{i} C_k \ceil*{\frac{t}{p_k}}, 0 < t \leq p_i.
\end{equation}

The following inequality 
\begin{equation}
    w_i(t) \leq t
\end{equation}

holds for any time instant $t$  chosen as follows:
\begin{equation}
    t = kp_j, j=1,\dots i,k=1\dots \floor*{\frac{p_i}{p_j}}
\end{equation}

If $d_i \neq p_i$ we replace $p_i$ by min($d_i$, $p_i$).

For $T_1$, $i = 1, j = 1,\dots i = 1,$ so 
\begin{equation}
    k = 1,\dots,\floor*{\frac{d_i}{d_j}} = 1,\dots,\floor*{\frac{170}{170}} = 1
\end{equation}

Thus, $t = kd_j = 1(170) = 170$.
Task $T_1$ is is DM schedulable if $c_1 \leq 170$. 
Since $c_1 = 100 \leq 170$, $T_1$ is DM schedulable. 

For $T_2$, $i = 2, j = 1,\dots i = 1,2,$ so
\begin{equation}
    k = 1,\dots,\floor*{\frac{d_i}{d_j}} =1,\dots \floor*{\frac{360}{170}} = 1, 2
\end{equation}

Thus, $t = 1 d_1 = 1(170) = 170$ or $t = 1 d_2 = 1(360) = 360$ or $t = 2 d_1 = 2(170) = 340$.
Task $T_2$ is DM schedulable if $c_1 + c_2 \leq 170$ or $3c_1 + 2c_2 \leq 360$ or $2c_1 + c_2 \leq 340$. 
Since $c_1 = 100, c_2 = 90$

\section*{acknowledgements}
%Note correct LaTeX quotations above. Do not use the " symbol, but rather double ` followed by double '

\begin{thebibliography}{9} %If you have more than 9 sources listed, replace this "9" with "99".

\bibitem{journal} Marquez, V., Frohlich, T., Armache, J. P., Sohmen, D., Donhofer, A., Mikolajka, A., Berninghausen, O., Thomm, M., Beckmann, R., Arnold, G. J., and Wilson, D. N. (2011) Proteomic characterization of archaeal ribosomes reveals the presence of novel archaeal-specific ribosomal proteins, \textit{J Mol Biol} 405, 1215--1232. \textit {https://doi.org/10.33697/ajur.2019.003}

\bibitem{chapters} Fierke, C. A., and Hammes, G. G. (1996) Transient Kinetic Approaches to Enzyme Mechanisms, in \textit{Contemporary Enzyme Kinetics and Mechanism} (Purich, D., Ed.) 2nd ed., 1--35, Academic Press, New York.

\bibitem{web} Agricultural Research Service, U.S.D.A. National Nutrient Database for Standard Reference, Release 26, \textit{http://ndb.nal.usda.gov/ndb/search/list} (accessed Mar 2014)

\bibitem{cheng} Cheng, A. M. K (2002) Real-Time Systems Scheduling, Analysis and Verification

\end{thebibliography}

% The About the Student Author section is NOT optional.  Write a paragraph about the student; see previous journal editions for examples.
% If there is more than one student author, you must move the comment below.
\section*{about the student author}
%\section*{about the student authors}
Youri Klaassens is a final year bachelor student at Inholland University of Applied Science studying Computer Engineering.

Nick van Endhoven is a final year bachelor student at Avans University of Applied Science studying Computer Engineering.

% The Press Summary section is NOT optional.  Write a paragraph describing the paper in a manner suitable for the press; see previous journal editions for examples.
\section{Summary}

\end{document}
